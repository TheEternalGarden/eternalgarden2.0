<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eternal Garden</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            background: #000;
            margin: 0;
            padding: 0;
            font-family: 'HeliosExt', Arial, Helvetica, sans-serif;
            color: #fff;
            overflow: hidden;
            /* DEBUG: Make background bright red to see if CSS loads */
            background: #ff0000 !important;
        }
        
        .intro-text-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            background: #000;
            transition: opacity 0.5s ease-in-out;
        }
        
        .intro-text-container.fade-out {
            opacity: 0;
            pointer-events: none;
        }
        
        .eternal-garden-title {
            font-size: 1.6rem;
            font-weight: 300;
            letter-spacing: 4px;
            text-align: center;
            margin-bottom: 40px;
            font-family: 'HeliosExt', Arial, Helvetica, sans-serif;
            color: #fff;
            /* DEBUG: Make title huge and bright green */
            font-size: 5rem !important;
            color: #00ff00 !important;
            background: #000 !important;
        }
        
        .eternal-garden-subtext {
            font-size: 0.9rem;
            font-weight: 300;
            line-height: 1.6;
            text-align: center;
            max-width: 800px;
            margin-bottom: 40px;
            letter-spacing: 1px;
            font-family: 'HeliosExt', Arial, Helvetica, sans-serif;
            color: #fff;
            /* Debug: temporary border to see if CSS is loading */
            border: 2px solid red !important;
        }
        
        .typewriter-cursor {
            animation: blink 1s infinite;
            color: #888;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        /* Make PROJECTS page non-clickable on homepage */
        .hamburger-menu .menu-items ul li a[href="projects.html"] {
            pointer-events: none !important;
            cursor: default !important;
            color: #fff !important;
            text-decoration: none !important;
        }
        
        /* Mobile responsive for homepage */
        @media screen and (max-width: 768px) {
            .eternal-garden-title {
                font-size: 0.8rem !important;
                letter-spacing: 3px;
                margin-bottom: 30px;
            }
            
            .eternal-garden-subtext {
                display: none !important; /* Hide description text on mobile */
                max-width: 90%;
                line-height: 1.5;
                margin-bottom: 30px;
            }
        }

        @media screen and (max-width: 480px) {
            .eternal-garden-title {
                font-size: 1rem !important;
                letter-spacing: 2px;
                margin-bottom: 25px;
            }
            
            .eternal-garden-subtext {
                display: none !important; /* Hide description text on mobile */
                max-width: 95%;
                line-height: 1.4;
                margin-bottom: 25px;
            }
            
            .volume-toggle {
                bottom: 15px;
                right: 15px;
                width: 50px;
                height: 50px;
            }
        }

        @media screen and (max-width: 320px) {
            .eternal-garden-title {
                font-size: 1.2rem !important;
                letter-spacing: 1px;
                margin-bottom: 20px;
            }
            
            .eternal-garden-subtext {
                display: none !important; /* Hide description text on mobile */
                max-width: 98%;
                line-height: 1.3;
                margin-bottom: 20px;
            }
        }
        
        .video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            z-index: 0;
            background-color: #000;
            opacity: 1; /* Show video immediately for autoplay to work */
            transition: opacity 0.5s ease-in-out;
        }
        
        .video-container.show {
            opacity: 1;
        }
        
        .video-container video {
            width: 100vw;
            height: 100vh;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
        }
        
        .volume-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            border: none;
            color: white;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 2000;
            font-size: 20px;
            transition: all 0.3s ease;
        }
        
        .volume-toggle:hover {
            background: rgba(0, 0, 0, 0.9);
            transform: scale(1.1);
        }
        
        .title {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.6rem;
            font-weight: 300;
            letter-spacing: 4px;
            text-align: center;
            z-index: 1000;
            font-family: 'HeliosExt', Arial, Helvetica, sans-serif;
        }
        
        /* Ensure hamburger menu is visible */
        .hamburger-menu {
            position: fixed !important;
            top: 20px !important;
            right: 20px !important;
            z-index: 9999 !important;
        }
        
        .hamburger-icon {
            z-index: 10000 !important;
        }
        
        .hamburger-icon span {
            background: #fff !important;
        }
        
        @font-face {
            font-family: 'HeliosExt';
            src: url('fonts/HeliosExt.otf') format('opentype');
            font-weight: normal;
            font-style: normal;
        }
    </style>
</head>
<body>
    <div class="hamburger-menu">
        <div class="hamburger-icon">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <nav class="menu-items">
            <ul>
                <li><a href="index.html">HOME</a></li>
                <li>
                    <a href="#" style="pointer-events: none; cursor: default;">STORY</a>
                    <ul class="sub-menu">
                        <li><a href="codex.html">CODEX</a></li>
                        <li><a href="kindred.html">KINDRED</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#" style="pointer-events: none; cursor: default;">PROJECTS</a>
                    <ul class="sub-menu">
                        <li><a href="rebirth.html">REBIRTH</a></li>
                        <li><a href="darkside.html">DARKSIDE</a></li>
                    </ul>
                </li>
                <li><a href="soundtrack.html">SOUNDTRACK</a></li>
                <li><a href="soundtrack.html" class="zero-soundtrack">ZERO SOUNDTRACK</a></li>
                <li><a href="darkside-soundtrack.html">DARKSIDE SOUNDTRACK</a></li>
                <li><a href="about.html">ABOUT</a></li>
                <li><a href="oracle.html">ORACLE</a></li>
            </ul>
        </nav>    </div>

    <!-- Intro Text Container -->
    <div class="intro-text-container" id="introTextContainer">
        <div class="eternal-garden-title" id="eternalGardenTitle"></div>
        <div class="eternal-garden-subtext" id="eternalGardenSubtext"></div>
    </div>

    <!-- Video Container -->
    <div class="video-container" id="videoContainer">
        <video id="introVideo" loop playsinline webkit-playsinline preload="auto" autoplay muted>
            <source src="./media/videos/gardenerintro.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div id="videoError" class="video-error" style="display: none;">
            Video failed to load. Please refresh the page.
        </div>
        <button id="volumeToggle" class="volume-toggle" aria-label="Toggle sound">
            <span class="volume-icon">ðŸ”‡</span>
        </button>
    </div>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const introTextContainer = document.getElementById('introTextContainer');
            const videoContainer = document.getElementById('videoContainer');
            const eternalGardenTitle = document.getElementById('eternalGardenTitle');
            const eternalGardenSubtext = document.getElementById('eternalGardenSubtext');
            const video = document.getElementById('introVideo');
            const volumeToggle = document.getElementById('volumeToggle');
            
            // Typewriter effect for title
            const titleText = 'ETERNAL GARDEN';
            let titleIndex = 0;
            
            function typeTitle() {
                if (titleIndex < titleText.length) {
                    eternalGardenTitle.innerHTML = titleText.substring(0, titleIndex + 1) + '<span class="typewriter-cursor">|</span>';
                    titleIndex++;
                    setTimeout(typeTitle, 80);
                } else {
                    eternalGardenTitle.innerHTML = titleText + '<span class="typewriter-cursor">|</span>';
                    // Start typing subtext after title is complete
                    setTimeout(typeSubtext, 300);
                }
            }
            
            // Typewriter effect for subtext
            const subtextText = 'Eternal Garden is a sci-fi fantasy epic about a mystical seed with the power to spawn infinite worlds';
            let subtextIndex = 0;
            
            function typeSubtext() {
                if (subtextIndex < subtextText.length) {
                    eternalGardenSubtext.innerHTML = subtextText.substring(0, subtextIndex + 1) + '<span class="typewriter-cursor">|</span>';
                    subtextIndex++;
                    setTimeout(typeSubtext, 50);
                } else {
                    eternalGardenSubtext.innerHTML = subtextText + '<span class="typewriter-cursor">|</span>';
                    // Fade to black and start video after subtext is complete
                    setTimeout(startVideoTransition, 300);
                }
            }
            
            // Start video transition
            function startVideoTransition() {
                // Fade out intro text
                introTextContainer.classList.add('fade-out');
                
                // After fade out, show video container and start video from beginning
                setTimeout(() => {
                    videoContainer.classList.add('show');
                    video.currentTime = 0; // Start from beginning
                    
                    // Detect mobile device for optimal autoplay strategy
                    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || 
                                    (window.innerWidth <= 768);
                    
                    console.log('Device detected:', isMobile ? 'Mobile' : 'Desktop');
                    
                    // IMPORTANT: Start muted for autoplay to work on mobile
                    video.muted = true; // This ensures autoplay works
                    video.volume = 0.5;
                    volumeToggle.textContent = 'ðŸ”‡';
                    
                    // Enhanced mobile autoplay strategy
                    const playVideo = async () => {
                        try {
                            await video.play();
                            console.log('Video autoplay successful!');
                            
                            document.addEventListener('click', unmuteOnInteraction);
                            document.addEventListener('touchstart', unmuteOnInteraction);
                            document.addEventListener('keydown', unmuteOnInteraction);
                            document.addEventListener('scroll', unmuteOnInteraction);
                            
                        } catch (error) {
                            console.error('Autoplay failed:', error);
                            
                            // Enhanced fallback for mobile autoplay restrictions
                            if (isMobile) {
                                console.log('Setting up mobile autoplay fallback...');
                                
                                // Add play button overlay for mobile
                                const playOverlay = document.createElement('div');
                                playOverlay.id = 'playOverlay';
                                playOverlay.innerHTML = '<div class="play-button">â–¶</div><div class="play-text">Tap to Play</div>';
                                playOverlay.style.cssText = `
                                    position: absolute;
                                    top: 0;
                                    left: 0;
                                    width: 100%;
                                    height: 100%;
                                    background: rgba(0, 0, 0, 0.7);
                                    display: flex;
                                    flex-direction: column;
                                    justify-content: center;
                                    align-items: center;
                                    z-index: 1000;
                                    cursor: pointer;
                                `;
                                
                                const playButton = playOverlay.querySelector('.play-button');
                                playButton.style.cssText = `
                                    font-size: 4rem;
                                    color: white;
                                    margin-bottom: 1rem;
                                `;
                                
                                const playText = playOverlay.querySelector('.play-text');
                                playText.style.cssText = `
                                    color: white;
                                    font-size: 1.2rem;
                                    font-family: 'HeliosExt', Arial, sans-serif;
                                `;
                                
                                videoContainer.appendChild(playOverlay);
                                
                                // Play video on tap/click
                                const startVideo = async () => {
                                    try {
                                        await video.play();
                                        playOverlay.style.display = 'none';
                                        console.log('Video started on user interaction');
                                        
                                        document.addEventListener('click', unmuteOnInteraction);
                                        document.addEventListener('touchstart', unmuteOnInteraction);
                                        document.addEventListener('keydown', unmuteOnInteraction);
                                        document.addEventListener('scroll', unmuteOnInteraction);
                                        
                                    } catch (error) {
                                        console.error('Still cannot play video:', error);
                                    }
                                };
                                
                                playOverlay.addEventListener('click', startVideo);
                                playOverlay.addEventListener('touchend', startVideo);
                                
                            } else {
                                // Desktop fallback
                                videoContainer.addEventListener('click', function() {
                                    video.play().catch(e => console.error('Still cannot play:', e));
                                });
                            }
                        }
                    };
                    
                    // Try to play the video (muted for autoplay compatibility)
                    playVideo();
                }, 300);
            }
            
            // Prepare video for autoplay after typewriter completes
            video.addEventListener("loadeddata", function() {
                console.log("Video data loaded and ready for typewriter completion");
            });
            
            // Start the typewriter sequence
            setTimeout(typeTitle, 500);
            
            // Mobile autoplay fallback - add touch/click to play functionality
            // Simple mobile auto-unmute (doesn't interfere with volume toggle)
            const simpleUnmuteOnInteraction = () => {
                if (video.muted && video.readyState >= 2) {
                    video.muted = false;
                    volumeToggle.textContent = 'ðŸ”Š';
                    console.log('Auto-unmuted video on mobile interaction');
                    // Remove listeners after unmuting
                    document.removeEventListener('touchstart', simpleUnmuteOnInteraction);
                    document.removeEventListener('click', simpleUnmuteOnInteraction);
                }
            };
            
            // Only add auto-unmute for mobile devices
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth <= 768) {
                document.addEventListener('touchstart', simpleUnmuteOnInteraction);
                document.addEventListener('click', simpleUnmuteOnInteraction);
            }
            let autoplayAttempted = false;
            document.addEventListener('click', function() {
                if (!autoplayAttempted && video.paused) {
                    autoplayAttempted = true;
                    video.play().catch(e => console.error('Mobile autoplay fallback failed:', e));
                }
            });
            document.addEventListener('touchend', function() {
                if (!autoplayAttempted && video.paused) {
                    autoplayAttempted = true;
                    video.play().catch(e => console.error('Mobile autoplay fallback failed:', e));
                }
            });
            
            // Volume toggle functionality
            if (video && volumeToggle) {
                console.log('Video and volume toggle found, initializing...');
                
                // Initialize video - don't start playing yet
                video.volume = 0.5;
                video.muted = true; // Start muted
                
                volumeToggle.textContent = 'ðŸ”‡';
                
                console.log('Video initialized - muted:', video.muted, 'volume:', video.volume);
                
                volumeToggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Volume toggle clicked, current muted state:', video.muted);
                    
                    // Toggle muted state for mobile
                    if (video.muted) {
                        video.muted = false;
                        video.volume = 0.5;
                        volumeToggle.textContent = 'ðŸ”Š';
                        console.log('Unmuted video via volume toggle');
                    } else {
                        video.muted = true;
                     