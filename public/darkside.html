<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DARKSIDE - Eternal Garden</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            background: #000;
            color: #fff;
            font-family: 'HeliosExt', Arial, Helvetica, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow: hidden;
        }
        
        .darkside-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1;
        }
        
        .fullscreen-video {
            width: 100vw;
            height: 100vh;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
        }
        
        /* Desktop video (show on larger screens) */
        .desktop-video {
            display: block;
        }
        
        /* Mobile video (hide on larger screens) */
        .mobile-video {
            display: none;
        }
        
        .fade-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            z-index: 500;
            opacity: 0;
            transition: opacity 2s ease-in-out;
            pointer-events: none;
        }
        
        .fade-overlay.active {
            opacity: 1;
        }
        
        .final-content {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 600;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            padding: 50px;
            box-sizing: border-box;
        }
        
        .final-content.active {
            opacity: 1;
        }
        
        .darkside-title {
            font-size: 2rem;
            font-weight: 300;
            letter-spacing: 4px;
            text-align: center;
            margin-bottom: 40px;
            font-family: 'HeliosExt', Arial, Helvetica, sans-serif;
        }
        
        .darkside-description {
            font-size: 0.8rem;
            font-weight: 300;
            line-height: 1.6;
            text-align: center;
            max-width: 800px;
            margin-bottom: 40px;
            letter-spacing: 1px;
            font-family: 'HeliosExt', Arial, Helvetica, sans-serif;
        }
        
        .music-out-now {
            font-size: 1.2rem;
            font-weight: 300;
            letter-spacing: 3px;
            text-align: center;
            margin-top: 20px;
            font-family: 'HeliosExt', Arial, Helvetica, sans-serif;
        }
        
        .typewriter-cursor {
            animation: blink 1s infinite;
            color: #888;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        /* Mobile responsive styles for DARKSIDE page */
        @media screen and (max-width: 768px) {
            /* Hide desktop video on mobile */
            .desktop-video {
                display: none;
            }
            
            /* Show mobile video on mobile */
            .mobile-video {
                display: block;
            }
            
            .fullscreen-video {
                width: 100vw;
                height: 100vh;
                object-fit: cover;
            }
            
            .darkside-title {
                font-size: 1.5rem;
            }
            
            .darkside-description {
                font-size: 0.7rem;
                padding: 0 20px;
            }
            
            .music-out-now {
                font-size: 1rem;
            }
            
            .final-content {
                padding: 30px 20px;
            }
        }
        
        @media screen and (max-width: 480px) {
            .darkside-title {
                font-size: 1.2rem;
            }
            
            .darkside-description {
                font-size: 0.6rem;
            }
            
            .music-out-now {
                font-size: 0.9rem;
            }
        }
        
        @media screen and (max-width: 320px) {
            .darkside-title {
                font-size: 1rem;
            }
            
            .darkside-description {
                font-size: 0.5rem;
            }
            
            .music-out-now {
                font-size: 0.8rem;
            }
        }
        
        /* Ensure hamburger menu is visible on darkside page */
        .hamburger-menu {
            position: fixed !important;
            top: 20px !important;
            right: 20px !important;
            z-index: 9999 !important;
        }
        
        .hamburger-icon {
            z-index: 10000 !important;
        }
        
        .hamburger-icon span {
            background: #fff !important;
        }
    </style>
</head>
<body>
    <div class="hamburger-menu">
        <div class="hamburger-icon">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <nav class="menu-items">
            <ul>
                <li><a href="index.html">HOME</a></li>
                <li>
                    <a href="#" style="pointer-events: none; cursor: default;">STORY</a>
                    <ul class="sub-menu">
                        <li><a href="codex.html">CODEX</a></li>
                        <li><a href="kindred.html">KINDRED</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#" style="pointer-events: none; cursor: default;">PROJECTS</a>
                    <ul class="sub-menu">
                        <li><a href="rebirth.html">REBIRTH</a></li>
                        <li><a href="darkside.html">DARKSIDE</a></li>
                    </ul>
                </li>
                <li><a href="soundtrack.html">SOUNDTRACK</a></li>
                <li><a href="soundtrack.html" class="zero-soundtrack">ZERO SOUNDTRACK</a></li>
                <li><a href="darkside-soundtrack.html">DARKSIDE SOUNDTRACK</a></li>
                <li><a href="about.html">ABOUT</a></li>
                <li><a href="oracle.html">ORACLE</a></li>
            </ul>
        </nav>    </div>
    
    <div class="darkside-container">
        <!-- Desktop video (vertical) -->
        <video class="fullscreen-video desktop-video" autoplay playsinline controls preload="metadata">
            <source src="media/videos/dsrunningtrailer.mov" type="video/quicktime">
            <source src="media/videos/dsrunningtrailer.mov" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        
        <!-- Mobile video (horizontal) - placeholder for new video -->
        <video class="fullscreen-video mobile-video" autoplay playsinline muted controls preload="metadata" webkit-playsinline>
            <!-- New mobile video will be added here -->
            Your browser does not support the video tag.
        </video>
    </div>
    
    <div class="fade-overlay" id="fade-overlay"></div>
    
    <div class="final-content" id="final-content">
        <div class="darkside-title" id="darkside-title"></div>
        <div class="darkside-description" id="darkside-description"></div>
        <div class="music-out-now" id="music-out-now"></div>
    </div>
    
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const desktopVideo = document.querySelector('.desktop-video');
            const mobileVideo = document.querySelector('.mobile-video');
            const fadeOverlay = document.getElementById('fade-overlay');
            const finalContent = document.getElementById('final-content');
            
            // Mobile video handling
            if (window.innerWidth <= 768) {
                // For mobile, try to play the video and handle user interaction
                mobileVideo.muted = true; // Ensure muted for autoplay
                
                // Try to play the video
                mobileVideo.play().catch(function(error) {
                    console.log('Mobile video autoplay failed:', error);
                    // Add click-to-play functionality
                    document.addEventListener('click', function() {
                        mobileVideo.play().catch(function(e) {
                            console.log('Mobile video play failed:', e);
                        });
                    }, { once: true });
                });
                
                // Allow unmuting after user interaction
                mobileVideo.addEventListener('click', function() {
                    if (mobileVideo.muted) {
                        mobileVideo.muted = false;
                        console.log('Mobile video unmuted');
                    }
                });
                
                // Also allow unmuting via controls
                mobileVideo.addEventListener('volumechange', function() {
                    if (mobileVideo.volume > 0) {
                        mobileVideo.muted = false;
                    }
                });
            }
            
            // Function to handle video end
            function handleVideoEnd() {
                console.log('Video ended, starting fade effect');
                
                // Start fade to black
                fadeOverlay.classList.add('active');
                
                // After fade completes, show final content
                setTimeout(() => {
                    finalContent.classList.add('active');
                    startFinalTypewriter();
                }, 2000);
            }
            
            // Add event listeners to both videos
            desktopVideo.addEventListener('ended', handleVideoEnd);
            mobileVideo.addEventListener('ended', handleVideoEnd);
            
            // Final typewriter effects
            function startFinalTypewriter() {
                // Typewriter for DARKSIDE title
                const darksideTitle = document.getElementById('darkside-title');
                const titleText = 'DARKSIDE';
                let titleIndex = 0;
                
                function typeDarksideTitle() {
                    if (titleIndex < titleText.length) {
                        darksideTitle.innerHTML = titleText.substring(0, titleIndex + 1) + '<span class="typewriter-cursor">|</span>';
                        titleIndex++;
                        setTimeout(typeDarksideTitle, 150);
                    } else {
                        darksideTitle.innerHTML = titleText + '<span class="typewriter-cursor">|</span>';
                        // Start description after title
                        setTimeout(typeDescription, 1000);
                    }
                }
                
                // Typewriter for description
                const darksideDescription = document.getElementById('darkside-description');
                const descriptionText = 'DARKSIDE is an audio-visual experience following TK, a traveler seeking the answers from his past. One day he discovers the DARKSIDE archive, an ancient realm holding the history of his Arcadian ancestry. Here, TK must confront ancestral traumas, and unlock his Arcadian powers.';
                let descIndex = 0;
                
                function typeDescription() {
                    if (descIndex < descriptionText.length) {
                        darksideDescription.innerHTML = descriptionText.substring(0, descIndex + 1) + '<span class="typewriter-cursor">|</span>';
                        descIndex++;
                        setTimeout(typeDescription, 50);
                    } else {
                        darksideDescription.innerHTML = descriptionText + '<span class="typewriter-cursor">|</span>';
                        // Start "LISTEN NOW" after description
                        setTimeout(typeListenNow, 1000);
                    }
                }
                
                // Typewriter for "LISTEN NOW"
                const musicOutNow = document.getElementById('music-out-now');
                const listenText = 'LISTEN NOW';
                let listenIndex = 0;
                
                function typeListenNow() {
                    if (listenIndex < listenText.length) {
                        musicOutNow.innerHTML = listenText.substring(0, listenIndex + 1) + '<span class="typewriter-cursor">|</span>';
                        listenIndex++;
                        setTimeout(typeListenNow, 100);
                    } else {
                        musicOutNow.innerHTML = '<a href="darkside-soundtrack.html" style="color: #fff; text-decoration: none; cursor: pointer;" onclick="console.log(\'LISTEN NOW clicked - going to darkside-soundtrack.html\')">' + listenText + '</a><span class="typewriter-cursor">|</span>';
                    }
                }
                
                // Start the sequence
                typeDarksideTitle();
            }
        });
    </script>
</body>
</html>
